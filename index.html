<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gallery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .glassmorphism {
            background: rgba(255, 255, 255, 0.20);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            padding: 1rem 2rem;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1030;
        }
        body {
            padding-top: 120px;
        }
        .description {
            overflow: hidden;
            max-height: 60px;
            transition: max-height 0.3s ease;
        }
        .description.expanded {
            max-height: 500px;
        }
        .card {
            border-radius: 20px;
            overflow: hidden;
        }
        .card-img-top {
            max-height: 200px;
            width: 100%;
            object-fit: contain;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            display: block;
            margin: 0 auto;
        }
        .description {
            text-align: justify;
            font-size: 0.85rem;
            line-height: 1.4;
            color: #555;
        }
        .card-color-1 {
            background-color: #ffe4e1;
        }
        .card-color-2 {
            background-color: #fce4ec;
        }
        .card-color-3 {
            background-color: #f3e5f5;
        }
        .card-color-4 {
            background-color: #e3f2fd;
        }
        .card-color-5 {
            background-color: #e8f5e9;
        }
        .card-color-6 {
            background-color: #fff3e0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row-10">
            <div class="col">
                <div class="card mb-5 mt-3 rounded-nav shadow-lg fixed-top glassmorphism">
                <div class="h1 text-center">GALLERY OF COSMETIC PRODUCTS</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mb-5">
        <div class="container">
            <div class="row mb-4">
                <div class="col-md-6">
                    <label for="brandSelect" class="form-label">Choose a Brand:</label>
                    <select id="brandSelect" class="form-select">
                        <option value="maybelline">Maybelline</option>
                        <option value="colourpop">ColourPop</option>
                        <option value="l'oreal">L'Oréal</option>
                        <option value="covergirl">CoverGirl</option>
                        <option value="milani">Milani</option>
                        <option value="e.l.f.">e.l.f.</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="typeSelect" class="form-label">Choose a Product Type:</label>
                    <select id="typeSelect" class="form-select">
                        <option value="lipstick">Lipstick</option>
                        <option value="foundation">Foundation</option>
                        <option value="eyeshadow">Eyeshadow</option>
                        <option value="blush">Blush</option>
                        <option value="mascara">Mascara</option>
                        <option value="nail_polish">Nail Polish</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-center" id="container-row"></div>
    </div>
    <script>
        const containerRow = document.getElementById("container-row");
        const typeSelect = document.getElementById("typeSelect");
        const brandSelect = document.getElementById("brandSelect");

        async function loadMakeupProducts() {
            containerRow.innerHTML = "";
            const selectedType = typeSelect.value;
            const selectedBrand = brandSelect.value;

            try {
                const response = await fetch(
                    `http://makeup-api.herokuapp.com/api/v1/products.json?brand=${selectedBrand}&product_type=${selectedType}`
                );
                const products = await response.json();

                if (products.length === 0) {
                    containerRow.innerHTML = `<div class="text-warning">No products found for ${selectedBrand} (${selectedType}).</div>`;
                    return;
                }

                for (let i = 0; i < products.length; i++) {
                    const product = products[i];
                    const colorClass = `card-color-${(i % 6) + 1}`;
                    const description = product.description ? product.description : "No description available.";
                    containerRow.innerHTML += `
           <div class="col-6 col-md-4 col-lg-3 mb-4 px-2 d-flex">
                <div class="card shadow-sm rounded-5 w-100 h-100 d-flex flex-column ${colorClass}">
                <img src="${product.image_link}" class="card-img-top mt-3" alt="${product.name}">
                    <div class="card-body p-4 rounded-3 shadow-sm d-flex flex-column justify-content-between">
                        <div class="h5 mb-3 text-center">${product.name}</div>
                        <div class="mt-3 mb-3 text-center text-muted">${product.price ? `₱${product.price}` : 'Price not available'}</div>
                     </div>
                </div>
            </div> `
            ;
                }
            } catch (error) {
                containerRow.innerHTML = `<div class="text-danger">Failed to load products. Please try again later.</div>`;
                console.error("Error fetching makeup products:", error);
            }
        }

        function toggleDescription(index) {
            const desc = document.getElementById(`desc-${index}`);
            const btn = desc.nextElementSibling;
            desc.classList.toggle("expanded");
            btn.textContent = desc.classList.contains("expanded") ? "Show Less" : "Show More";
        }

        loadMakeupProducts();
        typeSelect.addEventListener("change", loadMakeupProducts);
        brandSelect.addEventListener("change", loadMakeupProducts);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>